chrome.runtime.onMessage.addListener(async n=>{let r=t();if(n.action===`UPDATE_STATUS`)r.innerHTML=`<strong>CF Sync:</strong> ${n.msg}`;else if(n.action===`SYNC_READY`){r.style.borderColor=`#2ecc71`,r.innerHTML=`<strong>‚úÖ Verdict OK!</strong><br>Cleaning & Pushing...`;let t=e(new DOMParser().parseFromString(n.problemHtml,`text/html`).querySelector(`.problem-statement`)),i=n.code,a=`# ${n.problemName}\n\n${t}`,o=`Solution.${{"GNU C++11":`cpp`,"GNU C++14":`cpp`,"GNU C++17":`cpp`,"GNU C++20":`cpp`,"Java 8":`java`,"Java 11":`java`,"Java 17":`java`,"Python 3":`py`,"PyPy 3":`py`}[n.language]||`txt`}`,{ghToken:s,githubRepo:c,ghUsername:l}=n.syncData;try{await chrome.runtime.sendMessage({action:`PUSH_TO_GITHUB`,data:{token:s,repo:c,contestId:n.contestId,problemNo:n.problemNo,files:[{fileName:`README.md`,content:a},{fileName:o,content:i}],message:`Add/Update solution for ${n.problemName} (${n.contestId}${n.problemNo})`,problemName:n.problemName}}),r.innerHTML=`<strong>üöÄ Synced!</strong><br>${n.problemName}<br>README.md + ${o} pushed.`}catch(e){r.style.borderColor=`#e74c3c`,r.innerHTML=`<strong>‚ùå Push failed</strong><br>${e.message||`Unknown error`}`}setTimeout(()=>r.remove(),6e3)}else n.action===`SYNC_FAILED`?(r.style.borderColor=`#e74c3c`,r.innerHTML=`<strong>‚ùå Verdict: ${n.reason}</strong><br>Sync cancelled.`,setTimeout(()=>r.remove(),5e3)):n.action===`GITHUB_PUSH_SUCCESS`||n.action===`GITHUB_PUSH_FAILED`&&(r.style.borderColor=`#e74c3c`,r.innerHTML=`<strong>‚ùå GitHub Error</strong><br>${n.error}`,setTimeout(()=>r.remove(),8e3))});function e(e){return e?e.innerText.replace(/\$\$\$/g,``).replace(/\\dots/g,`...`).replace(/\\le/g,`<=`).replace(/\\ge/g,`>=`).replace(/\n{3,}/g,`

`).replace(/Copy/g,``).trim():`No statement found`}function t(){let e=document.getElementById(`cf-sync-box`);return e||(e=document.createElement(`div`),e.id=`cf-sync-box`,e.style.cssText=`position:fixed; bottom:20px; right:20px; z-index:10000; padding:15px; background:#1e1e1e; color:white; border-radius:8px; border-left:5px solid #f1c40f; font-family:sans-serif; box-shadow:0 4px 15px rgba(0,0,0,0.3); max-width:300px;`,document.body.appendChild(e)),e}